<!DOCTYPE html>
<html lang="ar" dir="rtl" class="dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Storify</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Poppins', 'Tajawal', sans-serif;
        background-color: #1c1917; /* Dark Charcoal/Umber */
        background-image: radial-gradient(circle at top right, rgba(146, 64, 14, 0.2), transparent 40%),
                          radial-gradient(circle at bottom left, rgba(153, 27, 27, 0.2), transparent 50%);
        text-shadow: 0 1px 3px rgba(0,0,0,0.4);
      }
      .font-arabic {
        font-family: 'Tajawal', sans-serif;
      }
      /* Adding custom animations for smooth transitions */
      @keyframes fade-in {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      @keyframes fade-in-up {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .animate-fade-in {
        animation: fade-in 0.6s ease-out forwards;
      }
      .animate-fade-in-up {
        animation: fade-in-up 0.6s ease-out forwards;
      }
    </style>
    <script>
      tailwind.config = {
        darkMode: 'class', // Using class strategy
        theme: {
          extend: {
            colors: {
              'brand-bg-dark': '#1c1917', // Dark Charcoal/Umber
              'brand-surface-dark': '#292524', // Lighter Charcoal/Stone
              'brand-text-light': '#f3eade', // Warm Beige
              'brand-text-medium': '#a8a29e', // Muted Stone/Beige
              'brand-text-dark': '#78716c', // Darker Stone
              'brand-crimson': '#991b1b', // Deep Crimson
              'brand-amber': '#d97706', // Dark Amber
              'brand-bronze': '#92400e', // Dark Bronze/Burnt Umber
            },
            backgroundImage: {
               'gradient-crimson-amber': 'linear-gradient(to right, #991b1b, #d97706)',
               'gradient-bronze-warm': 'linear-gradient(to right, #92400e, #b45309)',
            },
            boxShadow: {
              'glow-amber': '0 0 15px 0px rgba(217, 119, 6, 0.4), 0 0 25px 0px rgba(153, 27, 27, 0.3)',
            }
          }
        }
      }
    </script>
    
    <!-- SystemJS for client-side module loading and Babel for TSX transpilation -->
    <script src="https://unpkg.com/systemjs@6.15.1/dist/s.min.js"></script>
    <script src="https://unpkg.com/systemjs-plugin-babel@latest/plugin-babel.js"></script>
    <script src="https://unpkg.com/systemjs-plugin-babel@latest/systemjs-babel-browser.js"></script>

    <script type="systemjs-config">
    {
        "map": {
            "react": "https://esm.sh/react@^18.3.1",
            "react-dom/client": "https://esm.sh/react-dom@^18.3.1/client",
            "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@^2.45.0",
            "@google/genai": "https://esm.sh/@google/genai@^0.1.0",
            "@netlify/functions": "https://esm.sh/@netlify/functions@^2.6.0",
            "plugin-babel": "https://unpkg.com/systemjs-plugin-babel@latest/plugin-babel.js",
            "systemjs-babel-build": "https://unpkg.com/systemjs-plugin-babel@latest/systemjs-babel-browser.js"
        },
        "meta": {
            "./*.tsx": { "loader": "plugin-babel" },
            "./*.ts": { "loader": "plugin-babel" },
            "./components/*.tsx": { "loader": "plugin-babel" },
            "./services/*.ts": { "loader": "plugin-babel" },
            "./netlify/functions/*.ts": { "loader": "plugin-babel" }
        },
        "transpiler": "plugin-babel"
    }
    </script>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "@supabase/supabase-js": "https://aistudiocdn.com/@supabase/supabase-js@^2.57.4",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.20.0",
    "@netlify/functions": "https://aistudiocdn.com/@netlify/functions@^4.2.6"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <!-- Load the app entry point via SystemJS, which will transpile it -->
    <script type="systemjs-import">
        System.import('./index.tsx');
    </script>
  </body>
</html>